<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—ë –†–∞–¥–∏–æ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }
        
        .player-container {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 400px;
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-top: 0;
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .radio-player {
            margin: 20px 0;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }
        
        .station-name {
            font-size: 20px;
            font-weight: bold;
            color: #2a5298;
            margin-bottom: 10px;
        }
        
        .stream-url {
            font-size: 12px;
            color: #666;
            word-break: break-all;
            background: #fff;
            padding: 5px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .big-play-button {
            width: 120px;
            height: 120px;
            border-radius: 60px;
            background: #2a5298;
            border: none;
            color: white;
            font-size: 48px;
            cursor: pointer;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .big-play-button:hover {
            transform: scale(1.1);
            background: #1e3c72;
        }
        
        .big-play-button.playing {
            background: #e53e3e;
        }
        
        .big-play-button.playing:hover {
            background: #c53030;
        }
        
        .volume-container {
            margin: 20px 0;
            text-align: left;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 10px;
        }
        
        .volume-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: #333;
            font-weight: bold;
        }
        
        input[type=range] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: #2a5298;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .info-panel {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .current-song {
            font-size: 18px;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 10px;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 5px;
        }
        
        .dj-info {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .listeners-info {
            background: #4caf50;
            color: white;
            padding: 8px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
        }
        
        .last-songs {
            margin-top: 20px;
            text-align: left;
            max-height: 150px;
            overflow-y: auto;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
        
        .last-songs h4 {
            color: #333;
            margin: 0 0 10px 0;
        }
        
        .song-item {
            padding: 8px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
        }
        
        .song-item:hover {
            background: #f5f5f5;
        }
        
        .song-time {
            color: #2a5298;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: normal;
            margin-top: 10px;
        }
        
        .status-badge.playing {
            background: #4caf50;
            color: white;
        }
        
        .status-badge.paused {
            background: #ff9800;
            color: white;
        }
        
        .status-badge.stopped {
            background: #f44336;
            color: white;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <h1>üìª –ú–û–Å –†–ê–î–ò–û</h1>
        
        <div class="radio-player">
            <div class="station-name" id="stationName">Radio Station</div>
            
            <!-- –ë–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ –≤–∫–ª/–≤—ã–∫–ª -->
            <button class="big-play-button" id="playPauseBtn">
                ‚ñ∂
            </button>
            
            <div class="stream-url" id="streamUrl">
                https://myradio24.org/98353
            </div>
            
            <div class="volume-container">
                <div class="volume-label">
                    <span>üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å</span>
                    <span id="volumeValue">70%</span>
                </div>
                <input type="range" id="volumeSlider" min="0" max="100" value="70">
            </div>
        </div>
        
        <div class="info-panel">
            <div class="current-song" id="currentSong">
                –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...
            </div>
            
            <div class="dj-info" id="djInfo">
                DJ: ...
            </div>
            
            <div class="listeners-info" id="listenersInfo">
                üë• 0 —Å–ª—É—à–∞—Ç–µ–ª–µ–π
            </div>
            
            <div id="statusBadge" class="status-badge stopped">
                ‚èπ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
            </div>
        </div>
        
        <div class="last-songs" id="lastSongs">
            <h4>üéµ –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–µ–∫–∏:</h4>
            <div id="songsList">
                <div class="song-item">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>
    
    <!-- –°–∫—Ä–∏–ø—Ç myradio24 (–≤—Å—Ç–∞–≤–ª—è–µ–º –î–û –Ω–∞—à–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞) -->
    <script src="https://myradio24.com/player/player.js?v3.31" 
            data-radio="98353" 
            data-interval="15" 
            data-vmid="0" 
            data-lang="ru">
    </script>
    
    <!-- –ù–∞—à —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø–æ—Å–ª–µ –∏—Ö —Å–∫—Ä–∏–ø—Ç–∞) -->
    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const RADIO_STREAM = 'https://myradio24.org/98353';
        const RADIO_API = 'https://myradio24.com/users/98353/status.json';
        const STATION_NAME = '–ú–æ—ë –†–∞–¥–∏–æ';
        
        class RadioPlayer {
            constructor() {
                // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
                this.playBtn = document.getElementById('playPauseBtn');
                this.volumeSlider = document.getElementById('volumeSlider');
                this.volumeValue = document.getElementById('volumeValue');
                this.currentSong = document.getElementById('currentSong');
                this.djInfo = document.getElementById('djInfo');
                this.listenersInfo = document.getElementById('listenersInfo');
                this.statusBadge = document.getElementById('statusBadge');
                this.songsList = document.getElementById('songsList');
                this.stationName = document.getElementById('stationName');
                this.streamUrl = document.getElementById('streamUrl');
                
                // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                this.isPlaying = false;
                this.myAudio = null;
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏
                this.stationName.textContent = STATION_NAME;
                this.streamUrl.textContent = RADIO_STREAM;
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
                this.setupEventListeners();
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
                const savedVolume = localStorage.getItem('radioVolume') || 70;
                this.volumeSlider.value = savedVolume;
                this.volumeValue.textContent = savedVolume + '%';
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                this.fetchRadioInfo();
                setInterval(() => this.fetchRadioInfo(), 15000);
                
                // –ò—â–µ–º –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã (–∏—Ö —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç –µ–≥–æ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)
                this.findAudioElement();
                setInterval(() => this.findAudioElement(), 2000);
            }
            
            setupEventListeners() {
                // –ö–Ω–æ–ø–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
                this.playBtn.addEventListener('click', () => this.togglePlay());
                
                // –ü–æ–ª–∑—É–Ω–æ–∫ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
                this.volumeSlider.addEventListener('input', (e) => {
                    const volume = e.target.value;
                    this.volumeValue.textContent = volume + '%';
                    localStorage.setItem('radioVolume', volume);
                    
                    // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç - –º–µ–Ω—è–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å
                    if (this.myAudio) {
                        this.myAudio.volume = volume / 100;
                    }
                });
            }
            
            findAudioElement() {
                // –ò—â–µ–º –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–ª —Å–∫—Ä–∏–ø—Ç myradio24
                const audioElement = document.querySelector('audio');
                if (audioElement && audioElement !== this.myAudio) {
                    console.log('–ù–∞—à–ª–∏ –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç!');
                    this.myAudio = audioElement;
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
                    this.myAudio.volume = this.volumeSlider.value / 100;
                    
                    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                    this.myAudio.addEventListener('play', () => {
                        this.isPlaying = true;
                        this.updateButtonState();
                        this.updateStatus('üîä –í —ç—Ñ–∏—Ä–µ', 'playing');
                    });
                    
                    this.myAudio.addEventListener('pause', () => {
                        this.isPlaying = false;
                        this.updateButtonState();
                        this.updateStatus('‚è∏ –ü–∞—É–∑–∞', 'paused');
                    });
                    
                    this.myAudio.addEventListener('error', () => {
                        console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è');
                        this.isPlaying = false;
                        this.updateButtonState();
                        this.updateStatus('‚è∏ –ü–∞—É–∑–∞', 'paused');
                    });
                }
            }
            
            togglePlay() {
                if (!this.myAudio) {
                    console.log('–ê—É–¥–∏–æ –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
                    return;
                }
                
                if (this.isPlaying) {
                    this.myAudio.pause();
                } else {
                    this.myAudio.play().catch(e => {
                        console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è');
                    });
                }
            }
            
            updateButtonState() {
                if (this.isPlaying) {
                    this.playBtn.innerHTML = '‚è∏';
                    this.playBtn.classList.add('playing');
                } else {
                    this.playBtn.innerHTML = '‚ñ∂';
                    this.playBtn.classList.remove('playing');
                }
            }
            
            updateStatus(text, type) {
                this.statusBadge.textContent = text;
                this.statusBadge.className = 'status-badge ' + type;
            }
            
            async fetchRadioInfo() {
                try {
                    const response = await fetch(RADIO_API);
                    const data = await response.json();
                    
                    this.currentSong.textContent = data.song || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
                    this.djInfo.textContent = 'DJ: ' + (data.djname || '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º');
                    this.listenersInfo.textContent = 'üë• ' + (data.listeners || 0) + ' —Å–ª—É—à–∞—Ç–µ–ª–µ–π';
                    
                    this.updateLastSongs(data.songs);
                    
                } catch (error) {
                    console.log('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏');
                }
            }
            
            updateLastSongs(songs) {
                if (!songs || !songs.length) {
                    this.songsList.innerHTML = '<div class="song-item">–ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–∫–∞—Ö</div>';
                    return;
                }
                
                this.songsList.innerHTML = '';
                
                songs.slice(0, 7).forEach(song => {
                    const songElement = document.createElement('div');
                    songElement.className = 'song-item';
                    
                    let songTime = '';
                    let songName = '';
                    
                    if (Array.isArray(song)) {
                        songTime = song[0] || '';
                        songName = song[1] || '';
                    } else {
                        songTime = song.time || '';
                        songName = song.song || '';
                    }
                    
                    songElement.innerHTML = `
                        <span class="song-time">${songTime}</span>
                        <span>${songName}</span>
                    `;
                    
                    this.songsList.appendChild(songElement);
                });
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–ª–µ–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            new RadioPlayer();
        });
    </script>
</body>
</html>
