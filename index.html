<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—ë –†–∞–¥–∏–æ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 10px;
        }
        
        .player-container {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-top: 0;
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .radio-player {
            margin: 20px 0;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }
        
        .station-name {
            font-size: 20px;
            font-weight: bold;
            color: #2a5298;
            margin-bottom: 10px;
        }
        
        .stream-url {
            font-size: 12px;
            color: #666;
            word-break: break-all;
            background: #fff;
            padding: 5px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .big-play-button {
            width: 120px;
            height: 120px;
            border-radius: 60px;
            background: #2a5298;
            border: none;
            color: white;
            font-size: 48px;
            cursor: pointer;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
        }
        
        .big-play-button:hover {
            transform: scale(1.1);
            background: #1e3c72;
        }
        
        .big-play-button.playing {
            background: #e53e3e;
        }
        
        .big-play-button.playing:hover {
            background: #c53030;
        }
        
        .volume-container {
            margin: 20px 0;
            text-align: left;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 10px;
        }
        
        .volume-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: #333;
            font-weight: bold;
        }
        
        input[type=range] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: #2a5298;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .info-panel {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .current-song {
            font-size: 18px;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 10px;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 5px;
            word-break: break-word;
        }
        
        .dj-info {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .listeners-info {
            background: #4caf50;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
        }
        
        .last-songs {
            margin-top: 20px;
            text-align: left;
            max-height: 150px;
            overflow-y: auto;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
        
        .last-songs h4 {
            color: #333;
            margin: 0 0 10px 0;
        }
        
        .song-item {
            padding: 8px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
        }
        
        .song-item:hover {
            background: #f5f5f5;
        }
        
        .song-time {
            color: #2a5298;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: normal;
            margin-top: 10px;
        }
        
        .status-badge.playing {
            background: #4caf50;
            color: white;
        }
        
        .status-badge.paused {
            background: #ff9800;
            color: white;
        }
        
        .status-badge.stopped {
            background: #f44336;
            color: white;
        }
        
        .mobile-warning {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <h1>üìª –ú–û–Å –†–ê–î–ò–û</h1>
        
        <div class="radio-player">
            <div class="station-name" id="stationName">Radio Station</div>
            
            <!-- –ë–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ –≤–∫–ª/–≤—ã–∫–ª -->
            <button class="big-play-button" id="playPauseBtn">
                ‚ñ∂
            </button>
            
            <div class="stream-url" id="streamUrl">
                https://myradio24.org/98353
            </div>
            
            <div class="volume-container">
                <div class="volume-label">
                    <span>üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å</span>
                    <span id="volumeValue">70%</span>
                </div>
                <input type="range" id="volumeSlider" min="0" max="100" value="70">
            </div>
        </div>
        
        <div class="info-panel">
            <div class="current-song" id="currentSong">
                –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...
            </div>
            
            <div class="dj-info" id="djInfo">
                DJ: ...
            </div>
            
            <div class="listeners-info" id="listenersInfo">
                üë• 0 —Å–ª—É—à–∞—Ç–µ–ª–µ–π
            </div>
            
            <div id="statusBadge" class="status-badge stopped">
                ‚èπ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
            </div>
        </div>
        
        <div class="last-songs" id="lastSongs">
            <h4>üéµ –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–µ–∫–∏:</h4>
            <div id="songsList">
                <div class="song-item">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>
    </div>
    
    <!-- –°–∫—Ä—ã—Ç—ã–π –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <audio id="hiddenAudio" preload="none"></audio>
    
    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const RADIO_STREAM = 'https://myradio24.org/98353';
        const RADIO_API = 'https://myradio24.com/users/98353/status.json';
        const STATION_NAME = '–ú–æ—ë –†–∞–¥–∏–æ';
        
        class RadioPlayer {
            constructor() {
                // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
                this.playBtn = document.getElementById('playPauseBtn');
                this.volumeSlider = document.getElementById('volumeSlider');
                this.volumeValue = document.getElementById('volumeValue');
                this.currentSong = document.getElementById('currentSong');
                this.djInfo = document.getElementById('djInfo');
                this.listenersInfo = document.getElementById('listenersInfo');
                this.statusBadge = document.getElementById('statusBadge');
                this.songsList = document.getElementById('songsList');
                this.stationName = document.getElementById('stationName');
                this.streamUrl = document.getElementById('streamUrl');
                
                // –°–æ–∑–¥–∞–µ–º —Å–≤–æ–π –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏—Ö
                this.audio = document.getElementById('hiddenAudio');
                
                // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                this.isPlaying = false;
                this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏
                this.stationName.textContent = STATION_NAME;
                this.streamUrl.textContent = RADIO_STREAM;
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
                this.setupEventListeners();
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
                const savedVolume = localStorage.getItem('radioVolume') || 70;
                this.volumeSlider.value = savedVolume;
                this.audio.volume = savedVolume / 100;
                this.volumeValue.textContent = savedVolume + '%';
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                this.fetchRadioInfo();
                setInterval(() => this.fetchRadioInfo(), 15000);
                
                // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
                if (this.isMobile) {
                    this.showMobileHint();
                }
            }
            
            setupEventListeners() {
                // –ö–Ω–æ–ø–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
                this.playBtn.addEventListener('click', () => {
                    // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö - –Ω—É–∂–Ω–æ –ø–æ —Ç–∞–ø—É –∑–∞–ø—É—Å—Ç–∏—Ç—å
                    if (this.isMobile && !this.isPlaying) {
                        // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∞—É–¥–∏–æ
                        this.playMobile();
                    } else {
                        this.togglePlay();
                    }
                });
                
                // –ü–æ–ª–∑—É–Ω–æ–∫ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
                this.volumeSlider.addEventListener('input', (e) => {
                    const volume = e.target.value;
                    this.volumeValue.textContent = volume + '%';
                    this.audio.volume = volume / 100;
                    localStorage.setItem('radioVolume', volume);
                });
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –∞—É–¥–∏–æ
                this.audio.addEventListener('play', () => {
                    this.isPlaying = true;
                    this.updateButtonState();
                    this.updateStatus('üîä –í —ç—Ñ–∏—Ä–µ', 'playing');
                });
                
                this.audio.addEventListener('pause', () => {
                    this.isPlaying = false;
                    this.updateButtonState();
                    this.updateStatus('‚è∏ –ü–∞—É–∑–∞', 'paused');
                });
                
                this.audio.addEventListener('error', (e) => {
                    console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è', e);
                    if (this.isPlaying) {
                        // –ü—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
                        setTimeout(() => {
                            if (this.isPlaying) {
                                this.audio.src = RADIO_STREAM;
                                this.audio.play().catch(() => {});
                            }
                        }, 2000);
                    }
                });
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
                document.addEventListener('touchstart', () => {
                    // –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
                }, { once: true });
            }
            
            playMobile() {
                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
                this.audio.src = RADIO_STREAM;
                
                // –ü—Ä–æ–±—É–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏
                const playPromise = this.audio.play();
                
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log('–ú–æ–±–∏–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ');
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –µ—â–µ —Ä–∞–∑
                        alert('–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –µ—â–µ —Ä–∞–∑ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã');
                    });
                }
            }
            
            togglePlay() {
                if (this.isPlaying) {
                    this.audio.pause();
                    this.audio.src = ''; // –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫
                } else {
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –∑–∞–ø—É—Å–∫–∞–µ–º
                    this.audio.src = RADIO_STREAM;
                    this.audio.load(); // –í–∞–∂–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
                    
                    const playPromise = this.audio.play();
                    
                    if (playPromise !== undefined) {
                        playPromise.catch(error => {
                            console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', error);
                            this.isPlaying = false;
                            this.updateButtonState();
                            this.updateStatus('‚è∏ –û—à–∏–±–∫–∞', 'paused');
                            
                            if (this.isMobile) {
                                alert('–ù–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑');
                            }
                        });
                    }
                }
            }
            
            updateButtonState() {
                if (this.isPlaying) {
                    this.playBtn.innerHTML = '‚è∏';
                    this.playBtn.classList.add('playing');
                } else {
                    this.playBtn.innerHTML = '‚ñ∂';
                    this.playBtn.classList.remove('playing');
                }
            }
            
            updateStatus(text, type) {
                this.statusBadge.textContent = text;
                this.statusBadge.className = 'status-badge ' + type;
            }
            
            async fetchRadioInfo() {
                try {
                    const response = await fetch(RADIO_API);
                    const data = await response.json();
                    
                    this.currentSong.textContent = data.song || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
                    this.djInfo.textContent = 'DJ: ' + (data.djname || '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º');
                    this.listenersInfo.textContent = 'üë• ' + (data.listeners || 0) + ' —Å–ª—É—à–∞—Ç–µ–ª–µ–π';
                    
                    this.updateLastSongs(data.songs);
                    
                } catch (error) {
                    console.log('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏');
                }
            }
            
            updateLastSongs(songs) {
                if (!songs || !songs.length) {
                    this.songsList.innerHTML = '<div class="song-item">–ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–∫–∞—Ö</div>';
                    return;
                }
                
                this.songsList.innerHTML = '';
                
                songs.slice(0, 7).forEach(song => {
                    const songElement = document.createElement('div');
                    songElement.className = 'song-item';
                    
                    let songTime = '';
                    let songName = '';
                    
                    if (Array.isArray(song)) {
                        songTime = song[0] || '';
                        songName = song[1] || '';
                    } else {
                        songTime = song.time || '';
                        songName = song.song || '';
                    }
                    
                    songElement.innerHTML = `
                        <span class="song-time">${songTime}</span>
                        <span>${songName}</span>
                    `;
                    
                    this.songsList.appendChild(songElement);
                });
            }
            
            showMobileHint() {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
                const hint = document.createElement('div');
                hint.className = 'mobile-warning';
                hint.innerHTML = 'üì± –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ: –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤–∫–ª—é—á–µ–Ω–∏—è, –ø–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 —Å–µ–∫—É–Ω–¥—ã';
                this.playerContainer.insertBefore(hint, this.infoPanel);
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–ª–µ–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            window.player = new RadioPlayer();
        });
    </script>
</body>
</html>
